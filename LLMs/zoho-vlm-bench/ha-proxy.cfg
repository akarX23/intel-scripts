global
    log stdout format raw local0
    maxconn 200000
    tune.ssl.default-dh-param 2048
    tune.bufsize 32768
    tune.maxrewrite 8192
    tune.ssl.cachesize 1000000
    tune.http.maxhdr 128
    tune.h2.max-concurrent-streams 256
    tune.h2.header-table-size 65536
    tune.h2.initial-window-size 1048576

defaults
    log global
    option redispatch
    timeout connect 5000ms
    timeout client 50000ms
    timeout server 50000ms

frontend vllm_frontend
    bind *:8000
    default_backend vllm_backend

backend vllm_backend
    balance roundrobin
    option httpchk GET /health
    server vllm-server-1 localhost:8001 check inter 10s
    server vllm-server-2 localhost:8002 check inter 10s
    server vllm-server-3 localhost:8003 check inter 10s
    server vllm-server-4 localhost:8004 check inter 10s